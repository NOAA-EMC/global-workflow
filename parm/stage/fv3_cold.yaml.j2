# # First 1/2 cycle also needs a atmos increment if doing warm start
#   if inputs.start in ['warm']:
#       for ftype in ['atmi003.nc', 'atminc.nc', 'atmi009.nc']:
# if inputs.nens > 0:
#for ftype in ['ratmi003.nc', 'ratminc.nc', 'ratmi009.nc']
{% set cycle_HH = current_cycle | strftime("%H") %}
{% set cycle_YMD = current_cycle | to_YMD %}
{% set cycle_YMDH = current_cycle | to_YMDH %}
fv3_cold:
    mkdir:
        - "{{ COM_ATMOS_INPUT }}"
    copy:
        - ["{{ BASE_CPLIC }}/{{ CPL_ATMIC }}/{{ cycle_YMD }}{{ cycle_HH }}/atmos/gfs_ctrl.nc", "{{ COM_ATMOS_INPUT }}/gfs_ctrl.nc"]
        {% for ftype in ["gfs_data", "sfc_data"] %}
        {% for ntile in range(1, ntiles + 1) %}
        - ["{{ BASE_CPLIC }}/{{ CPL_ATMIC }}/{{ cycle_YMD }}{{ cycle_HH }}/atmos/{{ ftype }}.tile{{ ntile }}.nc", "{{ COM_ATMOS_INPUT }}/{{ ftype }}.tile{{ ntile }}.nc"]
        {% endfor %} # ntile
        {% endfor %} # ftype
