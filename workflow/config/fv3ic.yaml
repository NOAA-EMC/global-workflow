# This file is used to generate config.fv3ic, which controls the
# chgres.  That is the program that converts Global Spectral Model
# analysis files to Finite Volume 3 input conditions.

config_fv3ic:
  filename: config.fv3ic
  content: !expand |
    #!/bin/ksh -x
    
    # This file is automatically generated from the YAML-based system
    # in ecf/ecfutils/.  Any changes will be overwritten if
    # setup_case.sh is rerun.
    
    ########## config.fv3ic ##########
    # Convert GFS initial conditions into FV3 initial conditions
    
    echo "BEGIN: config.fv3ic"
    
    # Task and thread configuration
    export npe_fv3ic={doc.partition_common.resources.run_fv3ic[0].mpi_ranks}
    export npe_node_fv3ic={doc.partition_common.resources.run_fv3ic[0].mpi_ranks}

    export ORIGIN_ROOT="{doc.places.BASE_CPLIC}"
    export CPL_ATMIC={doc.fv3_gfs_settings.CPL_ATMIC}
    export CPL_ICEIC={doc.ice_settings.CPL_ICEIC}
    export CPL_OCNIC={doc.ocn_settings.CPL_OCNIC}
    export CPL_WAVIC={doc.wave_settings.CPL_WAVIC}
    
    echo "END: config.fv3ic"
    
